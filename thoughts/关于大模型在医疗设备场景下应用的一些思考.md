# 关于大模型在医疗设备场景下应用的一些思考

_—— 一个在医疗健康领域从业多年的人的一些思考_

# 前言

2022 年，OpenAI 推出的大模型技术突破不仅在自然语言处理领域引发范式变革，更通过生成式人工智能（AIGC）技术的跨模态创新，迅速掀起全球科技界与公众的广泛关注。这种关注突破单一技术领域的边界，演变为对人工智能发展路径的集体探索，推动全球范围内掀起大模型研发热潮。

这场技术革命的核心驱动力在于大模型展现出的三大突破性能力：

*   多模态生成能力：通过 Transformer 架构的深度优化，实现文本生成、图像合成、视频创作等 AIGC 能力的指数级提升
    
*   认知智能进化：在逻辑推理、数学运算、代码生成等领域达到专业级水平，展现类人思维特征
    
*   感知智能融合：通过 CLIP 等多模态模型架构，实现视觉、语言、语音等跨模态信息的深度理解与协同处理
    

这些技术进展标志着通用人工智能（AGI）从理论探索迈向工程实践。特别是大模型在知识涌现、决策规划、自主学习等方面的表现，正在重构人机协作范式，为智能制造、生物医药、金融风控等领域带来颠覆性创新机遇。随着模型规模持续扩大（GPT-4 参数量达 1.8 万亿）、训练数据质量提升以及算力基础设施迭代，大模型技术正加速向通用智能体演进。

![具身智能-几个阶段的发展.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/4maOgXvR3gN0PlWN/img/d6c2f8a2-75aa-4ac8-a03d-4c990ff0dd70.png)

人工智能发展的路径

医疗领域作为人工智能发展的重要应用领域之一，一直是研究热点。我国在医疗人工智能领域重点做了如下几方面的规划（《"十四五" 医疗健康科技创新专项规划》），包括：

*   应用基础研究
    
*   前沿技术突破
    
*   常见多发疾病防控
    
*   重大传染病应对
    
*   医药健康产品研发
    
*   新型主动健康服务
    

**因此医疗器械及健康解决方案的****智能化对于以上方向有着极其重要的意义。**

# 医疗设备智能化的一般方案

![一般性医疗智能设备场景流程简图.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/4maOgXvR3gN0PlWN/img/310d65a2-03f7-4b36-92d2-192f4959b578.png)

流程方案简图

从架构体系来看，医疗设备智能场景方案可划分为云端（服务端 / 厂商端）与边缘端（用户端 / 设备端）两大体系。其中，云端体系进一步细分为在线与离线两大模块：

*   云端在线模块：以业务逻辑承载与智能化服务为核心。尽管智能化本质是业务逻辑的组成部分，但其在算法应用、模型驱动（如大语言模型、多模态模型）等层面具备显著特殊性，需单独进行重点刻画，涵盖 AI 应用服务、Agent 框架工具、模型推理等核心能力。
    
*   云端离线模块：聚焦数据处理全链路，通过 ETL 完成数据加工，构建数仓后开展知识抽取、用户画像生成，结合领域知识进行模型 Fine-tuning（微调），为云端在线服务提供数据资产与模型优化支撑。  
    边缘端作为用户交互界面，通过各类终端设备实现用户需求采集与初步处理，并与云端形成数据交互闭环，最终服务于用户实际应用场景。
    

**一点感悟：**

*   产品性是关键，必须保证用户最基础的需求
    
*   遵循奥坎姆剃刀原理，复杂度越高稳定性越差
    
*   云端智能化重点解决用户的长尾性需求
    
*   边缘端的智能化提升用户的基础功能的体感
    
*   边缘侧与云端相互的推动前进
    
*   数据很重要！算法的核心数据，垂类场景的**数据是护城河和壁垒**
    

# 关于技术细节的备忘

## 关于算力

**进行 GPU 选型时，需重点聚焦如下几个维度：**

*   显存容量，其直接决定模型训练与推理过程中数据的承载能力；
    
*   卡间通信带宽，高带宽特性可显著提升多卡并行计算效率，规避数据传输瓶颈；
    
*   GPU 内部的卡内通信带宽，决定了 GPU 内部不同组件（如计算核心、显存等）之间数据传输的速度 ；
    
*    Tensor Core 单元数量，其针对矩阵运算的优化设计，能大幅加速深度学习任务处理就；
    
*   使用场景要细分，训练和推理可以采用不同的GPU，如果在线流量相对小，推理GPU算力可以选择相对低一些的；当然如果并发高，根据**历史经验——高性能训练卡推理其实可以带来更高的性价比**；
    

**针对国产算力方案，评估时需着重考量两方面：**

*   一是适配难度，涵盖硬件兼容性、驱动适配及与开发框架的对接复杂度；
    
*   二是生态整合能力，完善的生态体系可确保开发工具、模型优化方案等资源协同。若需要采用国产 GPU，推荐华为昇腾、鲲鹏系列，该系列具备研发适配效率高的优势，可快速响应项目需求，同时对最新模型优化方案（如混合精度训练、动态图优化等）提供良好支持，有效保障 AI 任务的高效运行。
    

## 关于数据

### 关于数据处理

在医疗领域，数据安全性与隐私性是行业发展的 “生命线”，直接关联患者权益保护与医疗生态稳定。针对关键医疗数据，需以 “**最小授权原则**” 为核心，构建精细化权限管控体系，确保数据访问、调用等操作均处于严格审批与动态监管之下。

对于后续应用的数据，更需建立全流程**隐私**保护机制：特别是训练数据，必须通过标准化**匿名化**处理，运用去标识化技术剔除患者姓名、身份证号、生物特征等可识别个人身份的信息，从源头阻断隐私泄露风险，为医疗数据安全构筑坚实防护壁垒。

相较于医院病例数据普遍存在的非结构化特征，医疗设备采集的数据往往具备更高的标准化程度，在数据格式、字段完整性等层面表现更为规整。然而，受物理环境因素制约 —— 如网络稳定性不足、设备现场部署条件受限等，设备数据在采集过程中极易出现数据缺失、时间序列不连续等问题。针对这类数据瑕疵，需配套完善的数据后加工处理机制，通过**插值补全、异常值修正、时序对齐**等技术手段，系统性提升数据质量，为后续分析应用筑牢基础。 

数据仓库架构设计需遵循标准化方法论，建议采用成熟的四层架构体系（ODS→DWD→DWS→ADS）。参考阿里巴巴数据中台方法论，该分层方案通过以下机制保障系统健壮性：

清晰的层级定位

*   ODS 层：完整保留原始业务数据，实现操作型系统数据镜像
    
*   DWD 层：通过维度建模形成明细事实表，建立统一数据标准
    
*   DWS 层：构建主题域汇总表，支撑跨业务线分析需求
    
*   ADS 层：面向业务场景定制化输出，直接服务于应用系统
    

严格的分层原则

*   采用 "高内聚低耦合" 设计理念，每层聚焦单一职责
    
*   强制实施 "单向依赖" 规则，禁止跨层直接调用（如 DWS 层不得直接访问 ODS 层）
    
*   通过数据总线机制实现层间解耦，确保修改局部层级不影响全局
    

架构演进优势

*   提升数据资产复用率：DWD 层可支持多个 DWS 层模型构建
    
*   降低系统维护成本：变更影响范围控制在单层内
    
*   增强业务敏捷性：新业务需求可通过扩展 ADS 层快速响应
    

### 关于用户画像

#### ID识别难题

#### 跨源数据一致性难题：不同设备注册的信息ID不一致

#### 数据对齐率低下问题：ID的不一致性加剧了对齐率不高的问题

#### 设备端数据整合困境 

#### 多设备数据孤岛现象 ：不同设备，统一类设备不同版本采集数据的格式的差异型

#### 设备共享带来的数据干扰：一设备多用带来的数据混淆

#### 人口属性识别障碍 

*   自然属性数据缺失问题：用户的自然属性采集率是否能满足业务场景需要
    
*   社会属性推断困难：用户的职业、收入等社会属性数据通常需要通过间接的方式进行推断。在实际操作中，基于消费记录等数据进行推断的准确率仅能达到 xx% - xx%（保密，暂不披露）。
    

针对以上问题，很难有包治百病的的解决方案。通常是具体问题具体分析和解决。例如：

*   客服随访的设备信息补齐——成本确实高
    
*   营销类调查表的采集——可能受众群体就不太愿意去填写
    
*   制定医疗设备数据采集的标准协议，促进多模态数据的整合
    
*   建立数据质量监控体系，对用户画像的数据进行实时监测和评估
    
*   模式识别数据分布，解决设备共用的数据混淆
    

#### 关于画像打标

针对医疗设备数据用户画像的打标算法，需针对数据特性进行差异化的时间周期处理。由于不同设备（如监护仪、起搏器等）及病症（如慢性病、急性病）在数据采集频率、阈值设定及有效周期上存在显著差异，传统基于固定时间窗口的统一打标方式难以适配多样化场景。例如，心脏监测数据可能需要分钟级更新，而血糖监测则可能按天汇总。这种差异会导致直接比较不同标签值时出现量纲不一致的问题，从而影响用户画像的准确性和后续分析的有效性。因此，算法设计需具备泛化能力，通过动态调整时间窗口、引入多粒度聚合机制或标准化处理流程，确保在保留设备特异性的同时，实现标签的可比性和通用性。具体实施策略如下：

*   多模态数据特征建模：
    
    *   建立疾病特异性时间窗策略：糖尿病和高血压的采集使用数据窗口差异化处理
        
    *   开发自适应时间窗算法：基于疾病进展阶段自动调整采样周期，心力衰竭患者急性发作期采用 5 分钟高频监测
        
*   阈值差异化处理体系：
    
    *   构建医学知识库驱动的阈值标准
        
    *   实施设备类型归一化处理（相同类型设备采用统一的单位换算）
        
*   画像标签体系优化
    
    *   跨设备标签对齐框架：建立设备类型 - 生理指标映射关系；开发多源数据融合模型
        
    *   动态标签更新策略：设计疾病阶段敏感的更新频率（不同身体阶段，更新频率差异化）
        

## 关于知识库

知识库作为约束生成式AI幻觉现象、提升知识覆盖完备性及保持信息时效性的核心技术架构，其建设质量直接影响AI应用产品的可靠性与专业性。当前行业实践中已形成知识库与大语言模型协同演进的正向循环：知识库为模型提供结构化认知支撑，而模型技术则反哺知识库的智能化构建与维护。这一技术耦合关系使得知识库已成为现代AI系统不可或缺的基石性基础设施。

在知识库构建维度，技术实施需遵循系统化方法论：

*   数据治理层面
    
    *   做好自动化清洗管道（含去重、去噪、标准化等）与人工校验机制相结合，建立严格的准入控制机制，从源头确保知识单元的准确性与权威性。
        
*   检索架构设计，采用混合检索范式实现精准与语义的平衡：
    
    *   关键词检索：适用于结构化知识的快速定位，通过倒排索引技术实现
        
    *   向量检索：基于深度语义编码模型捕捉语义关联性
        
    *   复合检索引擎：通过加权融合或级联策略，兼顾检索精度与相关性排序
        
*   文档表征优化，在知识单元切分层面，突破传统固定窗口分块的局限性，采用：
    
    *   语义完整性导向的动态分块策略
        
    *   基于领域本体的上下文感知切分算法
        
    *   跨文档关联性增强的分块增强技术
        

以上是一套相对完善的「传统」知识库方案，近来深度与大模型融合的基于大模型进行实体识别和双层检索的知识库开源工具**LightRAG**引起了很大关注，这可能是一个更为简答和好用的解决方案。

## 关于performance

### 模型选型

#### 关于chat与instruct的选型

|  维度  |  Chat模型  |  Instruct模型  |
| --- | --- | --- |
|  对话能力  |  擅长多轮对话，能理解上下文并保持情感一致性，适用于**客服、虚拟助手**等场景。  |  对话能力较弱，输出更直接，缺乏情感调节机制。  |
|  任务执行  |  通用性较强，但任务执行精度依赖指令清晰度。  |  **专为任务优化，可处理复杂指令**（如代码生成、数学题解答），输出简洁且可控。  |
|  数据需求  |  需要大量标注的对话数据及用户反馈，训练成本较高。  |  **依赖指令-响应对数据，标注复杂度较低**，但需覆盖多任务场景。  |
|  输出风格  |  **生成内容更自然，接近人类对话习惯**，可能包含冗余信息。  |  输出结构化、精准，避免无关内容，适合专业场景（如**医疗咨询、法律建议**）。  |

_**PS：**__如果采用多Agent架构，结构化任务执行与工具调用建议采用instruct版本模型，对于直接与用户交互的模型可以考虑chat模型。当然无论哪个模型，对应的提示词工程都要精细化处理。_

#### 关于模态选型

从技术架构设计的视角来看，传统多模态信息处理系统普遍采用分阶段流水线式处理范式：首先通过声学特征提取与语音识别模块（ASR）将语音信号转化为结构化文本数据，同时借助OCR对图像/视频中的文字内容进行数字化解析。经过预处理阶段生成的文本信息，随后会被输入至大语言模型（LLM）进行深度语义理解、上下文关联分析及逻辑推理等认知层处理。这种解耦式架构的优势在于模块功能专注化，各组件可通过专用算法实现高精度处理（如ASR的声纹建模、OCR的版面分析），但同时也存在显著局限：各处理单元间的数据耦合度低，缺乏端到端的联合优化机制，且预处理误差会通过级联效应影响最终输出质量。

![传统方式-多模态.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/4maOgXvR3gN0PlWN/img/86b2e4b8-fa53-4c33-be97-8fd7db7854b6.png)

随着多模态技术的日臻完善，采取跨模态处理事声音、图像等非结构化数据的方式正在引发认知智能系统的范式变革。

![夸模态.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/4maOgXvR3gN0PlWN/img/80099942-cdf0-4c79-a28b-b24d895fd1b6.png)

**具体到场景而言，针对不同的服务场景，考虑其核心需求，比如音频输入，图像识别和文字交互等具体特点选择合适的模型是技术选型关键**。

#### 具体选用哪家的基座模型

大家纠结于Deepseek、Qwen、商汤、GLM、豆包和百度文心等的选型问题。很多模型存在授权和商业化的问题，我们重点关注QWen和Deepseek。

我们重点比较二者的定位、应用场景和私有化部署的成本，对于技术差异（模型结构，参数规模，注意力机制，）的比较非常多，我们就不再赘述。

|  维度  |  QWen  |  Deepseek  |
| --- | --- | --- |
|  #### 定位  |  以中文NLP为核心，兼顾多模态（文本、图像、音频）处理，强调长文本支持（最高100万token）和垂直领域应用。  |  聚焦高效推理与低延迟，主打数学、编程等逻辑密集型任务，强调成本控制与多任务处理。  |
|  #### 核心能力  |  *   中文语义理解与生成（法律合同分析、创意写作）      *   跨模态任务（视频摘要生成、图文问答）；      *   企业级服务整合（与阿里云生态无缝衔接）。       |  *   复杂数学问题求解（AIME 2024得分79.8%）；      *   代码生成与调试（Codeforces竞赛得分96.3%）；      *   动态路由的MoE架构实现高性价比推理。       |
|  部署灵活性  |  支持私有化部署（阿里云生态）  |  开源版本（MIT协议）适配多种硬件  |
|  选择场景  |  *   多模态交互需求（如电商视频生成商品描述）；      *   超长文本处理（法律合同分析、医学文献摘要）；      *   企业级私有化部署（金融、政务领域）。       |  *   高并发实时服务（客服机器人、代码助手）；      *   STEM领域任务（数学解题、科研论文推理）；      *   中小企业低成本AI落地（开源模型+低算力需求）；       |
|  FT难度  |  *   稠密架构稳定，微调更直接      *   依赖高质量指令数据，中文适配性强      *   Qwen由阿里云官方维护，提供标准化API、预训练模型库及文档，适合快速集成至生产环境。      *   Qwen-VL等衍生模型已预置视觉理解能力，降低跨模态任务的微调复杂度。       |  *   MoE动态路由需额外优化，难度较高      *   依赖合成数据生成，标注成本可控      *   DeepSeek提供完整的微调脚本（如Colossal-AI集成方案）、数据格式规范及配套课程，支持从硬件加速到算法优化的全链路定制      *   其开源特性吸引大量开发者贡献领域适配方案（如医疗、法律推理），加速模型迭代。       |

_**PS：不得不说QWen 2.5 VL 32B和QWen 2.5 7B Omin在视觉和语音等场景下表现非常好！**_

#### 关于模型的规模

*   不要刻意追求参数规模，规模太大，FT难度急剧增加
    
*   关注部署和维护成本
    
*   关注蒸馏的小模型
    

### 模型微调

关于微调的论文和技术著作非常多，在此不再掉书袋。**核心要想清楚微调解决的问题是什么，然后再去做微调**。

**微调的几条建议：**

*   **数据很关键（第一位的是数据质量）**：
    
    *   需确保数据的多样性、代表性和无偏性，避免噪声和有害内容
        
    *   指令数据集可以通过人工标注、开源NLP数据集或大模型自动生成（如基于种子指令扩展）
        
    *   强化学习使用偏好数据集（包含用户对生成结果的偏好标注）
        
*   根据任务需求匹配模型架构
    
    *   MoE适合复杂推理，Transformer适合通用文本生成
        
*   参数冻结策略：
    
    *   全参微调（FFT）适合数据充足（>10万样本），而LoRA、适配器（Adapter）等PEFT方法适合小样本场景（<1千样本）
        
*   关于灾难性遗忘缓解的问题：
    
    *   这个问题我的经验是很难避免，现有方法都是一部分缓解，使用中可以考虑识别场景和问题，只有专有领域问题才进入微调模型（**此处指的是垂类模型场景**）
        

### 幻觉的问题

*   幻觉很难避免，RAG+提示词工程是一个比较好的解决方案；
    
*   引入反思机制，通过大模型对生成内容做事实性校验可以部分解决，但是要考虑成本；
    

### 提示词工程

非常多的提示词工程的范式，简单罗列一些，具体使用中可以快速调试：

*   任务引导范式
    
*   结构优化范式
    
    *   分隔符增强
        
    *   格式指示
        
    *   思维链（CoT）
        
*   知识注入范式
    
    *   事实性知识（根据xxx回答此类）
        
    *   逻辑规则（已知条件\[规则1, 规则2...\]，请推导结论）
        
    *   多跳推理（基于步骤推理）
        
*   多轮交互范式
    
*   约束强化范式
    
    *   内容限制
        
    *   毒性过滤
        
*   跨模态范式
    
*   创造性引导
    
*   伦理安全范式
    

**常见领域的一些方式参考：**

|  领域  |  范式组合  |
| --- | --- |
|  医疗诊断  |  任务引导 + 知识注入 + 约束强化  |
|  金融风控  |  逻辑规则 + 多跳推理  |
|  教育辅导  |  思维链 + 多轮交互  |
|  内容创作  |  创造性引导 + 跨模态  |

## 关于推理框架

推理框架发展非常的繁多，然后从实际情况而言主要做如下简单推荐：

*   国产卡：
    
    *   LMDeploy ：对于壁仞、寒武纪，平头哥等支持相对好
        
    *   华为全家桶：适配华为的昇腾生态，关键点是昇腾的价格要考虑
        
*   N卡：
    
    *   VLLM：高并发，单轮场景更好
        
    *   SGLang：多轮对话更好
        

关于VLLM和SGLang的对比有很多，其实其kv缓存架构决定了各有所长，二者都属于非常优秀的加速框架，都有很好的开源社区支持。

## 关于智能体架构

*   MCP的相关架构模式极有可能成为实际标准；
    
*   对于高度自治的agent架构保持审慎的态度，如果场景能够确定，尽可能使用工作流模式；
    

关于Agent的架构类内容非常多，很多人都提过，在此不做赘述。